<!DOCTYPE html>
<html>
<head>
<style>
body {
  display: flex;
  justify-content: center;
  margin-top: 40px;
  font-family: Arial, sans-serif;
}

#calculator {
  width: 260px;
}

#display {
  height: 60px;
  background: #222;
  color: white;
  font-size: 28px;
  text-align: right;
  padding: 10px;
  box-sizing: border-box;
}

.buttons {
  display: flex;
  flex-wrap: wrap;
}

button {
  width: 25%;
  height: 60px;
  font-size: 18px;
}
</style>
</head>

<body>

<div id="calculator">
  <div id="display">0</div>

  <div class="buttons">
    <button onclick="clearAll()">C</button>
    <button onclick="backspace()">âŒ«</button>
    <button onclick="setOperator('/')">/</button>
    <button onclick="setOperator('*')">*</button>

    <button onclick="appendNumber('7')">7</button>
    <button onclick="appendNumber('8')">8</button>
    <button onclick="appendNumber('9')">9</button>
    <button onclick="setOperator('-')">-</button>

    <button onclick="appendNumber('4')">4</button>
    <button onclick="appendNumber('5')">5</button>
    <button onclick="appendNumber('6')">6</button>
    <button onclick="setOperator('+')">+</button>

    <button onclick="appendNumber('1')">1</button>
    <button onclick="appendNumber('2')">2</button>
    <button onclick="appendNumber('3')">3</button>
    <button onclick="calculate()">=</button>

    <button onclick="appendNumber('0')">0</button>
    <button onclick="appendDecimal()">.</button>
  </div>
</div>

<script>
let firstNumber = null;
let operator = null;
let waitingForSecond = false;

const display = document.getElementById("display");

function appendNumber(num) {
  if (display.textContent === "0" || waitingForSecond) {
    display.textContent = num;
    waitingForSecond = false;
  } else {
    display.textContent += num;
  }
}

function appendDecimal() {
  if (!display.textContent.includes(".")) {
    display.textContent += ".";
  }
}

function setOperator(op) {
  if (operator && !waitingForSecond) {
    calculate();
  }
  firstNumber = Number(display.textContent);
  operator = op;
  waitingForSecond = true;
}

function calculate() {
  if (operator === null || waitingForSecond) return;

  let secondNumber = Number(display.textContent);
  let result;

  if (operator === "+") result = firstNumber + secondNumber;
  if (operator === "-") result = firstNumber - secondNumber;
  if (operator === "*") result = firstNumber * secondNumber;
  if (operator === "/") {
    if (secondNumber === 0) {
      display.textContent = "Nope ðŸ˜";
      clearAfterError();
      return;
    }
    result = firstNumber / secondNumber;
  }

  result = Math.round(result * 100000) / 100000;
  display.textContent = result;
  firstNumber = result;
  operator = null;
  waitingForSecond = true;
}

function clearAll() {
  display.textContent = "0";
  firstNumber = null;
  operator = null;
  waitingForSecond = false;
}

function backspace() {
  if (display.textContent.length > 1) {
    display.textContent = display.textContent.slice(0, -1);
  } else {
    display.textContent = "0";
  }
}

function clearAfterError() {
  firstNumber = null;
  operator = null;
  waitingForSecond = true;
}
</script>

</body>
</html>
